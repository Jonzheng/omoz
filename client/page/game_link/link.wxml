<view class="page">
    <view class='title-line'></view>
        <view class='top-box'>
            <view class='top-label {{!op_hide ? "op-hide":""}}'>分数:</view>
            <view class='top-value {{!op_hide ? "op-hide":""}}'>{{spin_count}}</view>
            <view class='top-option {{option != 1 ? "":"option-active"}} {{op_hide ? "op-hide":""}}' bindtap="setting" data-option="1">难度设定</view>
            <view class='top-option {{option != 2 ? "":"option-active"}} {{op_hide ? "op-hide":""}}' bindtap="setting" data-option="2">排行榜</view>
            <image class='top-setting {{op_hide ? "rt-90":""}}' src='{{icon_setting}}' bindtap="setting" data-option="0"></image>
        </view>
    <view class='title-line'></view>

    <view class='box-body'>

    <view class="setting-box">

        <block wx:for="{{ks_all}}" wx:key="mkey" wx:for-index="row">
            <template is="all_kana" data="{{item,row}}"/>
        </block>

    <view class="setting-meun">

        <view class='top-label'>片假名:</view>
        <view class='col-kana {{kata_on ? "step-active":""}}' hover-class='step-hover' bindtap="switchKata">
            <view class='col-hira {{kata_on ? "step-color":""}}'>{{kata_on ? "ア": "あ"}}</view>
            <view class="col-kama">
                <view class="">{{!kata_on ? "ア": "あ"}}</view>
                <view class="">{{kata_on ? "on": "off"}}</view>
            </view>
        </view>
        <view class='setting-reset' hover-class='step-hover' bindtap="resetGame">
            <view class='top-label'>重置游戏</view>
        </view>
    </view>

    </view>

        <view class="box-link">

            <block wx:for="{{fields}}" wx:key="mkey" wx:for-index="idx">
                <template is="{{level_box}}" data="{{item,idx}}"/>
            </block>

        </view>
        <view class="box-rank">
            <view class="row-title">
                <view class="rank-value rank-no">排名</view>
                <view class="rank-value rank-player">玩家</view>
                <view class="rank-value">分数</view>
                <view class="rank-value">通关次数</view>
            </view>
            <view class="row-player">
                <view class="rank-value rank-no">1</view>
                <view class="rank-value rank-player">
                    <image class='user-avatar' src='{{avatarUrl}}'></image>
                    <view class='user-name'>{{showName}}</view>
                </view>
                <view class="rank-value">356</view>
                <view class="rank-value">5</view>
            </view>
            <view class="row-player">
                <view class="rank-value rank-no">1</view>
                <view class="rank-value rank-player">玩家1</view>
                <view class="rank-value">356</view>
                <view class="rank-value">5</view>
            </view>
            <view class="row-player">
                <view class="rank-value rank-no">1</view>
                <view class="rank-value rank-player">玩家1</view>
                <view class="rank-value">356</view>
                <view class="rank-value">5</view>
            </view>
        </view>
    </view>
</view>

<template name="level-1">
    <view class="box-row">
        <block wx:for="{{item}}" wx:key="mkey" wx:for-index="idx">
            <view class='step-out' data-row="{{item.row}}" data-col="{{item.col}}" data-roma="{{item.roma}}"
                data-status="{{item.status}}" bindtap="goLink">
                <view class='step {{item.on ? "step-on":"step-off"}} {{item.status == 0 ? "rt-90":""}} {{item.type == "kata" ? "step-kata":""}} {{item.active && item.status==1 ? "step-active":""}}'
                hover-class='step-hover' >
                <view class='step-word setp-show-2'>{{item.status == 0 ? "":item.word}}</view>
                </view>
            </view>
        </block>
    </view>
</template>

<template name="level-2">
    <view class="box-row">
        <block wx:for="{{item}}" wx:key="mkey" wx:for-index="idx">
            <view class='step-out-2'
                data-row="{{item.row}}" data-col="{{item.col}}"
                data-roma="{{item.roma}}" data-status="{{item.status}}" bindtap="link2">
                    <view class='step-2 {{item.on ? "step-on":"step-off"}}'>
                        <view class='step-word {{item.status==0 || item.active? "setp-show-2":"setp-hide-2"}}' hover-class='step-hover'>{{item.word}}</view>
                    </view>
            </view>
        </block>
    </view>
</template>

<!-- 结算页 -->
<template name="level-0">
    <view class="box-row">
        <block wx:for="{{item}}" wx:key="mkey" wx:for-index="idx">
            <view class='step-out-2'
                data-row="{{item.row}}" data-col="{{item.col}}" data-status="{{item.status}}" bindtap="next">
                    <view class='step-2 {{item.on ? "step-on":"step-off"}}'>
                        <view class='result-word {{item.word == "" ? "rt-90":""}}' hover-class='step-hover'>{{item.word}}</view>
                    </view>
            </view>
        </block>
    </view>
</template>

<!-- 设定假名 -->
<template name="all_kana">
    <view class="row-kana">
        <block wx:for="{{item}}" wx:key="mkey" wx:for-index="col">
            <view class='col-kana {{item.selected ? "step-active":""}}' hover-class='step-hover' data-row="{{row}}" data-col="{{col}}" bindtap="select">
                <view class='col-hira {{item.selected ? "step-color":""}}'>{{item.hira}}</view>
                <view class="col-kama">
                    <view class="">{{item.kata}}</view>
                    <view class="">{{item.roma}}</view>
                </view>
            </view>
        </block>
    </view>
</template>
